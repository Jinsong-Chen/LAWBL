---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# LAWBL: Latent (variable) Analysis with Bayesian Learning

The long-term goal of **LAWBL** is to provide a analytical framework for modeling latent variables with different Bayesian learning methods.

Currently, this package includes the Partially Confirmatory Factor Analysis (PCFA), a partially confirmatory approach covering a wide range of the exploratory-confirmatory continuum in factor analytic models (Chen, Guo, Zhang, & Pan, 2020). There are two major model variants with different constraints for identification. One assumes local  independence (LI) with a more exploratory tendency, which can be also called the E-step. The other allows local dependence (LD) with a more confirmatory tendency, which can be also called the C-step. Parameters are obtained by sampling from the posterior distributions with the Markov chain Monte Carlo (MCMC) techniques. Different Bayesian Lasso methos are used to regularize the loading pattern and local dependence.

Although only continuous data are supported currently, inclusion of mixed-type data is on schedule. More Bayesian learning approaches will be also included in future releases of this package.

Chen, J., Guo, Z., Zhang, L., & Pan, J. (2020). A partially confirmatory approach to scale development with the Bayesian Lasso. *Psychological Methods*. http://dx.doi.org/10.1037/met0000293.

## Installation

1) Install the released version from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("LAWBL")
```

2) Install the `devtools` package (if necessary), and install the development version from the Github.

```{r gh-installation, eval = FALSE}
# install.packages("devtools")
devtools::install_github("Jinsong-Chen/LAWBL")
```


## Example

Estimation with local dependence:

```{r example}
library(LAWBL)
dat <- sim18cfa1$dat
J <- ncol(dat)
K <- 3
Q<-matrix(-1,J,K);
Q[1:6,1]<-Q[7:12,2]<-Q[13:18,3]<-1
Q
mod1 <- pcfa(dat = dat, Q = Q,LD = T, burn = 2000, iter = 2000)
summary(mod1) # summarize basic information
summary(mod1, what = 'qlambda') #summarize significant loadings in pattern/Q-matrix format
summary(mod1, what = 'offpsx') #summarize significant LD terms

plot_eigen(mod1) # trace
plot_eigen(mod1, what='density')
plot_eigen(mod1, what='PGR')
```


